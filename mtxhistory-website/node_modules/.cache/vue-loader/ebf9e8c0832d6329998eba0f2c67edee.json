{"remainingRequest":"C:\\Users\\aleks\\Documents\\Programming\\mtxhistory\\mtxhistory-website\\node_modules\\vue-loader\\lib\\index.js??vue-loader-options!C:\\Users\\aleks\\Documents\\Programming\\mtxhistory\\mtxhistory-website\\src\\components\\Footer\\Footer.vue?vue&type=script&lang=js&","dependencies":[{"path":"C:\\Users\\aleks\\Documents\\Programming\\mtxhistory\\mtxhistory-website\\src\\components\\Footer\\Footer.vue","mtime":1603473541912},{"path":"C:\\Users\\aleks\\Documents\\Programming\\mtxhistory\\mtxhistory-website\\node_modules\\cache-loader\\dist\\cjs.js","mtime":499162500000},{"path":"C:\\Users\\aleks\\Documents\\Programming\\mtxhistory\\mtxhistory-website\\node_modules\\babel-loader\\lib\\index.js","mtime":499162500000},{"path":"C:\\Users\\aleks\\Documents\\Programming\\mtxhistory\\mtxhistory-website\\node_modules\\cache-loader\\dist\\cjs.js","mtime":499162500000},{"path":"C:\\Users\\aleks\\Documents\\Programming\\mtxhistory\\mtxhistory-website\\node_modules\\vue-loader\\lib\\index.js","mtime":499162500000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:Ly8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KCmltcG9ydCBheGlvcyBmcm9tICdheGlvcycKCmV4cG9ydCBkZWZhdWx0IHsKICBkYXRhKCkgewogICAgcmV0dXJuIHsKICAgICAgdmVyc2lvbjogJzEuMCcsCiAgICAgIHllYXI6ICcyMDIwJywKICAgICAgbGFzdFVwZGF0ZTogJycKICAgIH0KICB9LAoKICBtZXRob2RzOiB7CiAgICBnZXROWlRpbWUoKSB7CiAgICAgIHJldHVybiBuZXcgUHJvbWlzZShyZXNvbHZlID0+IHsKICAgICAgICBheGlvcwogICAgICAgIC5nZXQoJ2h0dHBzOi8vd29ybGR0aW1lYXBpLm9yZy9hcGkvdGltZXpvbmUvUGFjaWZpYy9BdWNrbGFuZCcpCiAgICAgICAgLnRoZW4oZGF0YSA9PiB7CiAgICAgICAgICB2YXIgTlpUaW1lID0gZGF0YS5kYXRhLmRhdGV0aW1lOwogICAgICAgICAgcmVzb2x2ZShOWlRpbWUuc3Vic3RyKDAsMTApKTsKICAgICAgICB9KQogICAgICAgIC5jYXRjaCgoKSA9PiB7CiAgICAgICAgICBjb25zb2xlLmxvZygnRGF0YWJhc2UgYm9vdGluZyB1cCBvciB1bmRlciBtYWludGVuYW5jZSEnKQogICAgICAgIH0pOwogICAgICB9KQogICAgfSwKCiAgICB1cGRhdGVEYWlseSgpIHsKICAgICAgdmFyIGNvbmZpZyA9IHsKICAgICAgICBtZXRob2Q6ICdwdXQnLAogICAgICAgIHVybDogJ2h0dHBzOi8vbXR4aGlzdG9yeS1iYWNrZW5kLmhlcm9rdWFwcC5jb20vdXBkYXRlL2RhaWx5JywKICAgICAgICBoZWFkZXJzOiB7IH0KICAgICAgfTsKICAgICAgYXhpb3MoY29uZmlnKQogICAgICAudGhlbihmdW5jdGlvbiAocmVzcG9uc2UpIHsKICAgICAgICB2YXIgZGF0ZUNvbmZpZyA9IHsKICAgICAgICAgIG1ldGhvZDogJ3B1dCcsCiAgICAgICAgICB1cmw6ICdodHRwczovL210eGhpc3RvcnktYmFja2VuZC5oZXJva3VhcHAuY29tL3VwZGF0ZS9zZXRMYXN0VXBkYXRlJywKICAgICAgICAgIGhlYWRlcnM6IHt9CiAgICAgICAgfQogICAgICAgIGF4aW9zKGRhdGVDb25maWcpCiAgICAgICAgLnRoZW4oZnVuY3Rpb24gKHJlc3BvbnNlKSB7CiAgICAgICAgICBjb25zb2xlLmxvZygnU2V0dGluZyBsYXN0IHVwZGF0ZSEnKTsKICAgICAgICAgIGNvbnNvbGUubG9nKEpTT04uc3RyaW5naWZ5KHJlc3BvbnNlLmRhdGEpKTsKICAgICAgICAgIGxvY2F0aW9uLnJlbG9hZCgpOwogICAgICAgIH0pCiAgICAgICAgLmNhdGNoKGZ1bmN0aW9uIChlcnJvcikgewogICAgICAgICAgY29uc29sZS5sb2coZXJyb3IpOwogICAgICAgIH0pOwogICAgICAgIGNvbnNvbGUubG9nKEpTT04uc3RyaW5naWZ5KHJlc3BvbnNlLmRhdGEpKTsKICAgICAgfSkKICAgICAgLmNhdGNoKGZ1bmN0aW9uIChlcnJvcikgewogICAgICAgIGNvbnNvbGUubG9nKGVycm9yKTsKICAgICAgfSk7CiAgICB9LAoKICAgIGdldFVwZGF0ZURhdGEoKSB7CiAgICAgIGlmKHRoaXMubGFzdFVwZGF0ZSA9PSAnJyl7CiAgICAgICAgYXhpb3MKICAgICAgICAuZ2V0KCdodHRwczovL210eGhpc3RvcnktYmFja2VuZC5oZXJva3VhcHAuY29tL3VwZGF0ZS9nZXRMYXN0VXBkYXRlJykKICAgICAgICAudGhlbiggYXN5bmMgZGF0YSA9PiB7CiAgICAgICAgICB0aGlzLmxhc3RVcGRhdGUgPSBkYXRhLmRhdGFbMF0udXBkYXRlRGF0ZTsKICAgICAgICAgIHZhciBOWlRpbWUgPSBhd2FpdCB0aGlzLmdldE5aVGltZSgpOwogICAgICAgICAgaWYoTlpUaW1lID4gdGhpcy5sYXN0VXBkYXRlKSB7CiAgICAgICAgICAgIHRoaXMudXBkYXRlRGFpbHkoKTsKICAgICAgICAgIH0KICAgICAgICAgIGVsc2UgY29uc29sZS5sb2coJ0FsbCBpcyB1cCB0byBkYXRlIScpOwogICAgICAgIH0pCiAgICAgICAgLmNhdGNoKCgpID0+IHsKICAgICAgICAgIGNvbnNvbGUubG9nKCdEYXRhYmFzZSBib290aW5nIHVwIG9yIHVuZGVyIG1haW50ZW5hbmNlIScpCiAgICAgICAgfSk7CiAgICAgIH0KICAgIH0sCgogICAgaXNTZWFyY2goKSB7CiAgICAgIGlmKHdpbmRvdy5sb2NhdGlvbi5ocmVmID09ICJodHRwOi8vbG9jYWxob3N0OjgwODAvIiB8fCB3aW5kb3cubG9jYXRpb24uaHJlZiA9PSAiaHR0cDovL210eGhpc3RvcnkuY29tLyIpCiAgICAgICAgcmV0dXJuIHRydWU7CiAgICAgIGVsc2UKICAgICAgICByZXR1cm4gZmFsc2U7CiAgICB9CiAgfSwKCiAgbW91bnRlZCgpewogICAgaWYod2luZG93LmxvY2F0aW9uLmhyZWYgPT0gImh0dHA6Ly9sb2NhbGhvc3Q6ODA4MC8iIHx8IHdpbmRvdy5sb2NhdGlvbi5ocmVmID09ICJodHRwOi8vbXR4aGlzdG9yeS5jb20vIikgewogICAgICB0aGlzLmdldFVwZGF0ZURhdGEoKTsKICAgICAgc2V0SW50ZXJ2YWwodGhpcy5nZXRTZWFyY2hEYXRhLCAxMDAwKTsKICAgIH0KICB9Cn0K"},{"version":3,"sources":["Footer.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;AAyBA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA","file":"Footer.vue","sourceRoot":"src/components/Footer","sourcesContent":["<template>\r\n    <div id=\"footer\">\r\n      <div id=\"appDescription\">\r\n        <p>\r\n        This is a fan made website for the daily deals available on Path of Exile Shop and their historical prices.\r\n        </p>\r\n        <p>\r\n          All videos and microtransaction data are from <a href=\"https://www.pathofexile.com/shop/category/daily-deals\" target=\"_blank\">https://www.pathofexile.com/shop/category/daily-deals</a>\r\n        </p>\r\n        <p>\r\n          All images are from <a href=\"https://pathofexile.gamepedia.com\" target=\"_blank\">https://pathofexile.gamepedia.com</a>\r\n        </p>\r\n        <p>\r\n          <a target=\"_blank\" href=\"https://icons8.com/icons/set/queen-uk\">Queen Crown icon</a> icon by <a target=\"_blank\" href=\"https://icons8.com\">Icons8</a>\r\n        </p>\r\n      </div>\r\n      <div id=\"appInfo\">\r\n        <h5>MTX History {{ year }}</h5>\r\n        <h6>Version {{ version }}</h6>\r\n        <h6 v-if=\"isSearch()\">Last updated NZDT {{ lastUpdate }}</h6>\r\n      </div>\r\n    </div>\r\n</template>\r\n\r\n<script>\r\n  import axios from 'axios'\r\n\r\n  export default {\r\n    data() {\r\n      return {\r\n        version: '1.0',\r\n        year: '2020',\r\n        lastUpdate: ''\r\n      }\r\n    },\r\n\r\n    methods: {\r\n      getNZTime() {\r\n        return new Promise(resolve => {\r\n          axios\r\n          .get('https://worldtimeapi.org/api/timezone/Pacific/Auckland')\r\n          .then(data => {\r\n            var NZTime = data.data.datetime;\r\n            resolve(NZTime.substr(0,10));\r\n          })\r\n          .catch(() => {\r\n            console.log('Database booting up or under maintenance!')\r\n          });\r\n        })\r\n      },\r\n\r\n      updateDaily() {\r\n        var config = {\r\n          method: 'put',\r\n          url: 'https://mtxhistory-backend.herokuapp.com/update/daily',\r\n          headers: { }\r\n        };\r\n        axios(config)\r\n        .then(function (response) {\r\n          var dateConfig = {\r\n            method: 'put',\r\n            url: 'https://mtxhistory-backend.herokuapp.com/update/setLastUpdate',\r\n            headers: {}\r\n          }\r\n          axios(dateConfig)\r\n          .then(function (response) {\r\n            console.log('Setting last update!');\r\n            console.log(JSON.stringify(response.data));\r\n            location.reload();\r\n          })\r\n          .catch(function (error) {\r\n            console.log(error);\r\n          });\r\n          console.log(JSON.stringify(response.data));\r\n        })\r\n        .catch(function (error) {\r\n          console.log(error);\r\n        });\r\n      },\r\n\r\n      getUpdateData() {\r\n        if(this.lastUpdate == ''){\r\n          axios\r\n          .get('https://mtxhistory-backend.herokuapp.com/update/getLastUpdate')\r\n          .then( async data => {\r\n            this.lastUpdate = data.data[0].updateDate;\r\n            var NZTime = await this.getNZTime();\r\n            if(NZTime > this.lastUpdate) {\r\n              this.updateDaily();\r\n            }\r\n            else console.log('All is up to date!');\r\n          })\r\n          .catch(() => {\r\n            console.log('Database booting up or under maintenance!')\r\n          });\r\n        }\r\n      },\r\n\r\n      isSearch() {\r\n        if(window.location.href == \"http://localhost:8080/\" || window.location.href == \"http://mtxhistory.com/\")\r\n          return true;\r\n        else\r\n          return false;\r\n      }\r\n    },\r\n\r\n    mounted(){\r\n      if(window.location.href == \"http://localhost:8080/\" || window.location.href == \"http://mtxhistory.com/\") {\r\n        this.getUpdateData();\r\n        setInterval(this.getSearchData, 1000);\r\n      }\r\n    }\r\n  }\r\n</script>\r\n\r\n<style lang=\"scss\" scoped>\r\n  h5 {\r\n    text-align: right;\r\n    margin-bottom: 5px;\r\n  }\r\n\r\n  h6 {\r\n    margin: 0px;\r\n    text-align: right;\r\n    padding-bottom: 10px;\r\n  }\r\n\r\n  p {\r\n    font-size: small;\r\n  }\r\n\r\n  #appDescription{\r\n    float: left;\r\n    width: 70%;\r\n  }\r\n\r\n  #appInfo {\r\n    float: right;\r\n    width: 20%;\r\n  }\r\n</style>"]}]}